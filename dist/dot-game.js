!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(11),o=(a.Construct=function(t,e,n,r){return new a(t,e,n,r?new i.LineOutput(r):null)},a.Initialize=function(t,e){return a.Construct(r.GameMessageType.Initialize,t,e)},a.ValidStartNode=function(t,e){return a.Construct(r.GameMessageType.ValidStartNode,t,e)},a.InvalidStartNode=function(t,e){return void 0===e&&(e="You must start on either end of the path!"),a.Construct(r.GameMessageType.InvalidStartNode,t,e)},a.ValidEndNode=function(t,e,n){return a.Construct(r.GameMessageType.ValidEndNode,t,e,n)},a.InvalidEndNode=function(t,e){return void 0===e&&(e="Not a valid line."),a.Construct(r.GameMessageType.InvalidEndNode,t,e)},a.GameOver=function(t,e,n){return a.Construct(r.GameMessageType.GameOver,t,e,n)},a.UpdateText=function(t,e){return a.Construct(r.GameMessageType.UpdateText,t,e)},a);function a(t,e,n,r){void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r=null),this.msg=t,this.msg=t,this.body={newLine:r,heading:e,message:n}}e.GameMessage=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.is=function(t){return this.x===t.x&&this.y===t.y},Object.defineProperty(i.prototype,"name",{get:function(){return"("+this.x+","+this.y+")"},enumerable:!0,configurable:!0}),i.prototype.toString=function(){return"Point"+this.name},i);function i(t,e){this.x=t,this.y=e}e.Point=r},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var o=(a.setLogger=function(t){a.logger=t},a.log=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=a.logger).log.apply(e,i([t],n))},a.info=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=a.logger).info.apply(e,i([t],n))},a.error=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=a.logger).error.apply(e,i([t],n))},a.warn=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=a.logger).warn.apply(e,i([t],n))},a.debug=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=a.logger).debug.apply(e,i([t],n))},a.logger=console,a);function a(){}e.DotGameLog=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=(Object.defineProperty(o.prototype,"startPoint",{get:function(){return this._startPoint},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPoint",{get:function(){return this._endPoint},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this._startPoint.name+"-"+this._endPoint.name+","},enumerable:!0,configurable:!0}),o.prototype.toString=function(){return"Line of "+this.name},o.prototype.points=function(){for(var t,e=[],n=r.LineWalker.walkTheLine(this);!(t=n.next()).done;)e.push(t.value);return e},o.prototype.asFlipped=function(){return new o(this.endPoint,this.startPoint)},o);function o(t,e){this._endPoint=e,this._startPoint=t}e.LineSegment=i},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.LineType||(e.LineType={}))[r.Horizontal=0]="Horizontal",r[r.Vertical=1]="Vertical",r[r.Diagonal=2]="Diagonal",r[r.Invalid=3]="Invalid"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),p=n(14),o=n(4),r=(a.isBetween=function(t,e,n){if(n<e){var r=e;e=n,n=r}return e<=t&&t<=n},a.isPointOnLineSegment=function(t,e){var n=e.startPoint,r=e.endPoint;if(t.is(n)||t.is(r))return!0;if((n.x-t.x)/(n.y-t.y)!=(t.x-r.x)/(t.y-r.y))return!1;var i=a.isBetween(t.x,n.x,r.x),o=a.isBetween(t.y,n.y,r.y);return i&&o},a.areLinesParallel=function(t,e){try{return a.findIntersectionOfLines(t,e),!1}catch(t){if(t instanceof p.ParallelLinesException)return!0;throw t}},a.doLineSegmentsTouch=function(t,e){try{if(a.isPointOnLineSegment(t.startPoint,e)||a.isPointOnLineSegment(t.endPoint,e)||a.isPointOnLineSegment(e.startPoint,t)||a.isPointOnLineSegment(e.endPoint,t))return!0;var n=a.findIntersectionOfLines(t,e),r=a.isPointOnLineSegment(n,t),i=a.isPointOnLineSegment(n,e);return r&&i}catch(t){if(t instanceof p.ParallelLinesException)return!1;throw t}},a.findIntersectionOfLines=function(t,e){var n=t.startPoint,r=t.endPoint,i=e.startPoint,o=e.endPoint,a=r.y-n.y,s=n.x-r.x,u=a*n.x+s*n.y,l=o.y-i.y,c=i.x-o.x,d=l*i.x+c*i.y,f=a*c-l*s;if(0==f)throw new p.ParallelLinesException("Lines do not intersect!");return new h.Point((c*u-s*d)/f,(a*d-l*u)/f)},a.lineType=function(t){var e=t.startPoint,n=t.endPoint;if(e.x===n.x&&e.y===n.y)return o.LineType.Invalid;var r=Math.abs(e.x-n.x),i=Math.abs(e.y-n.y);return 0===r&&0!==i?o.LineType.Vertical:0===i&&0!==r?o.LineType.Horizontal:r===i?o.LineType.Diagonal:o.LineType.Invalid},a);function a(){}e.Geometry=r},function(t,e,n){"use strict";var s=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),r=n(18),i=n(19),o=(a.prototype.isValid=function(t){var e,n;if(!this.octilinearLineValidator.isValid(t))return!1;if(this.path.hasEndPoints()){if(!this.path.isEndPoint(t.startPoint))return!1;if(!this.visitedNodeValidator.isNewLineValid(t))return!1;var r=0;try{for(var i=s(this.path.lines),o=i.next();!o.done;o=i.next()){var a=o.value;if(u.Geometry.doLineSegmentsTouch(t,a)&&1<++r)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}return!0},a);function a(t){this.path=t,this.octilinearLineValidator=new r.OctilinearLineValidator,this.visitedNodeValidator=new i.VisitedNodeValidator(t)}e.NewLineValidator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new(n(8).DotGame)(4,4,app.ports.response.send,console);app.ports.request.subscribe(function(t){return r.request(t)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=(o.prototype.request=function(t){this.game.request(t)},o);function o(t,e,n,r){void 0===t&&(t=4),void 0===e&&(e=4),this.boardWidth=t,this.boardHeight=e,this.out=n,this.game=new i.DotGameEngine(t,e,n,r),this.game.initGame()}e.DotGame=r},function(t,e,n){"use strict";var p=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var y=n(2),r=n(0),v=n(3),a=n(15),o=n(1),s=n(16),u=n(17),l=n(20),c=n(21),m=n(6),i=(Object.defineProperty(d.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"gameState",{set:function(t){y.DotGameLog.debug("Game State: "+t.constructor.name),this._gameState=t},enumerable:!0,configurable:!0}),d.prototype.changePlayersTurn=function(){this._currentPlayerNumber++,this._currentPlayerNumber===this.players.length&&(this._currentPlayerNumber=0)},d.prototype.timeoutMessage=function(){var t=this;this.clearTimoutMessage(),this._timeoutMessage=setTimeout(function(){t.send(t._gameState.timeout())},5e3)},d.prototype.clearTimoutMessage=function(){this._timeoutMessage&&(clearTimeout(this._timeoutMessage),this._timeoutMessage=null)},d.prototype.initGame=function(){this._gameState=this.lineStartState,this._currentPlayerNumber=0,this._path=new c.PathTracker;var t=this.currentPlayer().name;this.timeoutMessage(),y.DotGameLog.debug("New Game Initialized"),this.send(r.GameMessage.Initialize(t,"Awaiting "+t+"'s Move"))},d.prototype.isPointOnBoard=function(t){return 0<=t.x&&t.x<this.boardWidth&&0<=t.y&&t.y<this.boardHeight},d.prototype.currentPlayer=function(){return this.players[this._currentPlayerNumber]},d.prototype.waitingPlayer=function(){return 0===this._currentPlayerNumber?this.players[1]:this.players[0]},d.prototype.isMoveAvailable=function(){var e,t,n,r,i=[this.path.headPoint(),this.path.tailPoint()],o=new m.NewLineValidator(this.path);try{for(var a=p(i),s=a.next();!s.done;s=a.next()){var u=s.value,l=this.getAdjacentPoints(u);try{for(var c=(n=void 0,p(l)),d=c.next();!d.done;d=c.next()){var f=d.value,h=new v.LineSegment(u,f);if(o.isValid(h))return y.DotGameLog.debug("Valid move available: "+h.name),!0}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return y.DotGameLog.debug("No move is available!"),!1},d.prototype.getAdjacentPoints=function(t){for(var e=[],n=-1;n<=1;n++)for(var r=-1;r<=1;r++){var i=new o.Point(t.x+n,t.y+r);this.isPointOnBoard(i)&&!t.is(i)&&e.push(i)}return e},d.prototype.request=function(t){y.DotGameLog.debug(t),this.timeoutMessage();var e=JSON.parse(t);switch(e.msg){case"NODE_CLICKED":var n=new o.Point(e.body.x,e.body.y);this.send(this._gameState.selectPoint(n));break;case"ERROR":this.send(r.GameMessage.UpdateText(this.currentPlayer().name,"What would you like me to do about it? Refresh if you got a problem."))}},d.prototype.send=function(t){y.DotGameLog.debug(t),this.out(t)},d);function d(t,e,n,r){void 0===t&&(t=4),void 0===e&&(e=4),this.boardWidth=t,this.boardHeight=e,this.out=n,this.players=[],this._path=new c.PathTracker,this._currentPlayerNumber=0,r||y.DotGameLog.setLogger(console);for(var i=0;i<2;i++){var o="Player "+(i+1);this.players.push(new a.Player(o))}this.lineStartState=new l.LineStartState(this),this.nextLineEndState=new u.LineEndState(this),this.gameOverState=new s.GameOverState(this),this._gameState=this.lineStartState,y.DotGameLog.debug(""),y.DotGameLog.debug("-------------------"),y.DotGameLog.debug("DotGame constructed"),y.DotGameLog.debug("-------------------")}e.DotGameEngine=i},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.GameMessageType||(e.GameMessageType={})).Initialize="INITIALIZE",r.UpdateText="UPDATE_TEXT",r.ValidStartNode="VALID_START_NODE",r.InvalidStartNode="INVALID_START_NODE",r.ValidEndNode="VALID_END_NODE",r.InvalidEndNode="INVALID_END_NODE",r.GameOver="GAME_OVER",r.NodeClicked="NODE_CLICKED",r.Error="ERROR"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){this.start=t.startPoint,this.end=t.endPoint}e.LineOutput=r},function(t,e,n){"use strict";var f=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),r=n(13),i=n(4),o=n(5),a=(s.walkTheLine=function(t){switch(o.Geometry.lineType(t)){case i.LineType.Horizontal:return s.doWalkHorizontal(t);case i.LineType.Vertical:return s.doWalkVertical(t);case i.LineType.Diagonal:return s.walkDiagonal(t);case i.LineType.Invalid:throw new r.InvalidLineTypeException("Cannot walk an invalid line")}},s.walkDiagonal=function(e){var n,r,i,o,a,s,u,l,c,d;return f(this,function(t){switch(t.label){case 0:n=e.startPoint,r=e.endPoint,i=n.x,o=r.x,a=o<i?-1:1,s=r.y<n.y?-1:1,u=Math.abs(i-o),l=0,t.label=1;case 1:return l<=u?(c=n.x+a*l,d=n.y+s*l,[4,new h.Point(c,d)]):[3,4];case 2:t.sent(),t.label=3;case 3:return l++,[3,1];case 4:return[2]}})},s.doWalkHorizontal=function(e){var n,r,i,o,a,s,u,l,c;return f(this,function(t){switch(t.label){case 0:n=e.startPoint,r=e.endPoint,i=n.y,o=n.x,a=r.x,s=Math.abs(a-o),u=o<a?1:-1,l=0,t.label=1;case 1:return l<=s?(c=o+l*u,[4,new h.Point(c,i)]):[3,4];case 2:t.sent(),t.label=3;case 3:return l++,[3,1];case 4:return[2]}})},s.doWalkVertical=function(e){var n,r,i,o,a,s,u,l,c;return f(this,function(t){switch(t.label){case 0:n=e.startPoint,r=e.endPoint,i=n.x,o=n.y,a=r.y,s=Math.abs(a-o),u=o<a?1:-1,l=0,t.label=1;case 1:return l<=s?(c=o+l*u,[4,new h.Point(i,c)]):[3,4];case 2:t.sent(),t.label=3;case 3:return l++,[3,1];case 4:return[2]}})},s);function s(){}e.LineWalker=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=(o=Error,i(s,o),s);function s(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n.name=s.name,n}e.InvalidLineTypeException=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=(o=Error,i(s,o),s);function s(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n.name=s.name,n}e.ParallelLinesException=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){this.name=t}e.Player=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(o.prototype.selectPoint=function(t){var e=this.heading();return r.GameMessage.UpdateText(e,"Refresh to play again.")},o.prototype.timeout=function(){var t=this.heading();return r.GameMessage.UpdateText(t,"Refresh to play again. I'm waiting!")},o.prototype.heading=function(){return"This Game is Over - "+this.dotGame.currentPlayer().name+" Won!"},o);function o(t){this.dotGame=t}e.GameOverState=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(3),l=n(6),r=(i.prototype.selectPoint=function(t){var e=new u.LineSegment(this.dotGame.startLinePoint,t),n=new l.NewLineValidator(this.dotGame.path),r=this.dotGame.currentPlayer().name;if(t.is(this.dotGame.startLinePoint)||!n.isValid(e))return this.dotGame.gameState=this.dotGame.lineStartState,s.GameMessage.InvalidEndNode(r);this.dotGame.path.addLine(e),this.dotGame.changePlayersTurn();var i=this.dotGame.currentPlayer().name;if(this.dotGame.isMoveAvailable())return this.dotGame.gameState=this.dotGame.lineStartState,s.GameMessage.ValidEndNode(i,"",e);this.dotGame.gameState=this.dotGame.gameOverState,this.dotGame.clearTimoutMessage();var o=i+" Wins!",a="Sorry "+r+", you lost! Refresh to play again.";return s.GameMessage.GameOver(o,a,e)},i.prototype.timeout=function(){return s.GameMessage.UpdateText(this.dotGame.currentPlayer().name,"Finish that line...if it's not too much trouble!")},i);function i(t){this.dotGame=t}e.LineEndState=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(4),o=(a.prototype.isValid=function(t){return r.Geometry.lineType(t)!==i.LineType.Invalid},a);function a(){}e.OctilinearLineValidator=o},function(t,e,n){"use strict";var f=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(2),r=(i.prototype.isNewLineValid=function(t){var e,n,r,i,o=t.points();try{for(var a=f(o),s=a.next();!s.done;s=a.next()){var u=s.value;if(!t.startPoint.is(u))try{for(var l=(r=void 0,f(this.path.visitedPoints)),c=l.next();!c.done;c=l.next()){var d=c.value;if(u.is(d))return h.DotGameLog.info(t.name+"touches visited "+d),!1}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!0},i);function i(t){this.path=t}e.VisitedNodeValidator=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(o.prototype.selectPoint=function(t){var e=this.dotGame.currentPlayer().name;if(this.dotGame.isPointOnBoard(t))return!this.dotGame.isPointOnBoard(t)||this.dotGame.path.hasEndPoints()&&!this.dotGame.path.isEndPoint(t)?r.GameMessage.InvalidStartNode(e):(this.dotGame.gameState=this.dotGame.nextLineEndState,this.dotGame.startLinePoint=t,r.GameMessage.ValidStartNode(e,""));var n=t.name+" is not a valid dot on the board!";return r.GameMessage.InvalidStartNode(e,n)},o.prototype.timeout=function(){return r.GameMessage.UpdateText(this.dotGame.currentPlayer().name,"Let's get the show on the road. Start a new line at any time.")},o);function o(t){this.dotGame=t}e.LineStartState=i},function(t,e,n){"use strict";var a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(3),o=n(1),s=n(22),u=(Object.defineProperty(l.prototype,"visitedPoints",{get:function(){return this._visitedPoints},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"path",{get:function(){var e,t,n,r=[];try{for(var i=a(this._lines),o=i.next();!o.done;o=i.next())n=o.value,r.push(n.startPoint)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n&&r.push(n.endPoint),r},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0}),l.prototype.addLine=function(t){var e=this;if(r.DotGameLog.debug("Adding Line: ",t.name),r.DotGameLog.debug("Current Path:",this.path.toString()),this.hasEndPoints())if(t.startPoint.is(this.headPoint())){var n=t.asFlipped();r.DotGameLog.debug("Prepend Line(flipped): ",n.name),this._lines.unshift(n)}else r.DotGameLog.debug("Append Line: ",t.name),this._lines.push(t);else this._lines.push(t);t.points().forEach(function(t){return e._visitedPoints.push(t)}),r.DotGameLog.debug("New Path:",this.path.toString())},l.prototype.hasEndPoints=function(){return 0<this._lines.length},l.prototype.isEndPoint=function(t){return this.headPoint().is(t)||this.tailPoint().is(t)},l.prototype.headPoint=function(){if(!this.hasEndPoints())throw new s.NoEndpointsException("Head point does not exists");return this._lines[0].startPoint},l.prototype.tailPoint=function(){if(!this.hasEndPoints())throw new s.NoEndpointsException("Tail point does not exists");return this._lines[this.lines.length-1].endPoint},l.prototype.build=function(t){this._lines=[];for(var e=0;e<t.length-1;e++){var n=new o.Point(t[e][0],t[e][1]),r=new o.Point(t[e+1][0],t[e+1][1]);this.addLine(new i.LineSegment(n,r))}},l);function l(){this._visitedPoints=[],this._lines=[]}e.PathTracker=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=(o=Error,i(s,o),s);function s(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n.name=s.name,n}e.NoEndpointsException=a}]);
//# sourceMappingURL=dot-game.js.map