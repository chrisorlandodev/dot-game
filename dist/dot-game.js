!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){t.exports=e.DotGame=n(13)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(21)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(12)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(18)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(24)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(25)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(34)}).call(this,n(0))},function(t,e,n){(function(e){t.exports=e.DotGame=n(9)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=function(){function t(t,e,n,o){void 0===t&&(t=4),void 0===e&&(e=4),this.boardWidth=t,this.boardHeight=e,this.out=n,this.game=new i.DotGameEngine(t,e,n,o),this.game.initGame()}return t.prototype.request=function(t){this.game.request(t)},t.prototype.init=function(){this.game.initGame()},t}();e.Game=o},function(t,e,n){(function(e){t.exports=e.DotGame=n(11)}).call(this,n(0))},function(t,e,n){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(1),a=n(4),s=n(28),u=n(2),c=n(30),l=n(32),f=n(39),d=n(41),h=n(7),p=function(){function t(t,e,n,i){void 0===t&&(t=4),void 0===e&&(e=4),this.boardWidth=t,this.boardHeight=e,this.out=n,this.players=[],this._path=new d.PathTracker,this._currentPlayerNumber=0,i||o.DotGameLog.setLogger(console);for(var r=0;r<2;r++){var a="Player "+(r+1);this.players.push(new s.Player(a))}this.lineStartState=new f.LineStartState(this),this.nextLineEndState=new l.LineEndState(this),this.gameOverState=new c.GameOverState(this),this._gameState=this.lineStartState,o.DotGameLog.debug(""),o.DotGameLog.debug("-------------------"),o.DotGameLog.debug("DotGame constructed"),o.DotGameLog.debug("-------------------")}return Object.defineProperty(t.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameState",{set:function(t){o.DotGameLog.debug("Game State: "+t.constructor.name),this._gameState=t},enumerable:!0,configurable:!0}),t.prototype.changePlayersTurn=function(){this._currentPlayerNumber++,this._currentPlayerNumber===this.players.length&&(this._currentPlayerNumber=0)},t.prototype.timeoutMessage=function(){var t=this;this.clearTimoutMessage(),this._timeoutMessage=setTimeout(function(){t.send(t._gameState.timeout())},5e3)},t.prototype.clearTimoutMessage=function(){this._timeoutMessage&&(clearTimeout(this._timeoutMessage),this._timeoutMessage=null)},t.prototype.initGame=function(){this._gameState=this.lineStartState,this._currentPlayerNumber=0,this._path=new d.PathTracker;var t=this.currentPlayer().name;this.timeoutMessage(),o.DotGameLog.debug("New Game Initialized"),this.send(r.GameMessage.Initialize(t,"Awaiting "+t+"'s Move"))},t.prototype.isPointOnBoard=function(t){return t.x>=0&&t.x<this.boardWidth&&t.y>=0&&t.y<this.boardHeight},t.prototype.currentPlayer=function(){return this.players[this._currentPlayerNumber]},t.prototype.waitingPlayer=function(){return 0===this._currentPlayerNumber?this.players[1]:this.players[0]},t.prototype.isMoveAvailable=function(){var t,e,n,r,s=[this.path.headPoint(),this.path.tailPoint()],u=new h.NewLineValidator(this.path);try{for(var c=i(s),l=c.next();!l.done;l=c.next()){var f=l.value,d=this.getAdjacentPoints(f);try{for(var p=(n=void 0,i(d)),y=p.next();!y.done;y=p.next()){var m=y.value,v=new a.LineSegment(f,m);if(u.isValid(v))return o.DotGameLog.debug("Valid move available: "+v.name),!0}}catch(t){n={error:t}}finally{try{y&&!y.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}return o.DotGameLog.debug("No move is available!"),!1},t.prototype.getAdjacentPoints=function(t){for(var e=[],n=-1;n<=1;n++)for(var i=-1;i<=1;i++){var o=new u.Point(t.x+n,t.y+i);this.isPointOnBoard(o)&&!t.is(o)&&e.push(o)}return e},t.prototype.request=function(t){o.DotGameLog.debug(t),this.timeoutMessage();var e=JSON.parse(t);switch(e.msg){case"INITIALIZE":this.initGame();break;case"NODE_CLICKED":var n=new u.Point(e.body.x,e.body.y);this.send(this._gameState.selectPoint(n));break;case"ERROR":this.send(r.GameMessage.UpdateText(this.currentPlayer().name,"What would you like me to do about it? Refresh if you got a problem."))}},t.prototype.send=function(t){o.DotGameLog.debug(t),this.out(t)},t}();e.DotGameEngine=p},function(t,e,n){"use strict";var i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.setLogger=function(e){t.logger=e},t.log=function(e){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=t.logger).log.apply(n,o([e],i))},t.info=function(e){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=t.logger).info.apply(n,o([e],i))},t.error=function(e){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=t.logger).error.apply(n,o([e],i))},t.warn=function(e){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=t.logger).warn.apply(n,o([e],i))},t.debug=function(e){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=t.logger).debug.apply(n,o([e],i))},t.logger=console,t}();e.DotGameLog=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=n(16),r=function(){function t(t,e,n,i){void 0===e&&(e=""),void 0===n&&(n=""),void 0===i&&(i=null),this.msg=t,this.msg=t,this.body={newLine:i,heading:e,message:n}}return t.Construct=function(e,n,i,r){return new t(e,n,i,r?new o.LineOutput(r):null)},t.Initialize=function(e,n){return t.Construct(i.GameMessageType.Initialize,e,n)},t.ValidStartNode=function(e,n){return t.Construct(i.GameMessageType.ValidStartNode,e,n)},t.InvalidStartNode=function(e,n){return void 0===n&&(n="You must start on either end of the path!"),t.Construct(i.GameMessageType.InvalidStartNode,e,n)},t.ValidEndNode=function(e,n,o){return t.Construct(i.GameMessageType.ValidEndNode,e,n,o)},t.InvalidEndNode=function(e,n){return void 0===n&&(n="Not a valid line."),t.Construct(i.GameMessageType.InvalidEndNode,e,n)},t.GameOver=function(e,n,o){return t.Construct(i.GameMessageType.GameOver,e,n,o)},t.UpdateText=function(e,n){return t.Construct(i.GameMessageType.UpdateText,e,n)},t}();e.GameMessage=r},function(t,e,n){(function(e){t.exports=e.DotGame=n(15)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Initialize="INITIALIZE",t.UpdateText="UPDATE_TEXT",t.ValidStartNode="VALID_START_NODE",t.InvalidStartNode="INVALID_START_NODE",t.ValidEndNode="VALID_END_NODE",t.InvalidEndNode="INVALID_END_NODE",t.GameOver="GAME_OVER",t.NodeClicked="NODE_CLICKED",t.Error="ERROR"}(e.GameMessageType||(e.GameMessageType={}))},function(t,e,n){(function(e){t.exports=e.DotGame=n(17)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.start=t.startPoint,this.end=t.endPoint};e.LineOutput=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),o=function(){function t(t,e){this._endPoint=e,this._startPoint=t}return Object.defineProperty(t.prototype,"startPoint",{get:function(){return this._startPoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){return this._endPoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._startPoint.name+"-"+this._endPoint.name+","},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Line of "+this.name},t.prototype.points=function(){for(var t,e=[],n=i.LineWalker.walkTheLine(this);!(t=n.next()).done;)e.push(t.value);return e},t.prototype.asFlipped=function(){return new t(this.endPoint,this.startPoint)},t}();e.LineSegment=o},function(t,e,n){(function(e){t.exports=e.DotGame=n(20)}).call(this,n(0))},function(t,e,n){"use strict";var i=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(22),a=n(5),s=n(6),u=function(){function t(){}return t.walkTheLine=function(e){switch(s.Geometry.lineType(e)){case a.LineType.Horizontal:return t.doWalkHorizontal(e);case a.LineType.Vertical:return t.doWalkVertical(e);case a.LineType.Diagonal:return t.walkDiagonal(e);case a.LineType.Invalid:throw new r.InvalidLineTypeException("Cannot walk an invalid line")}},t.walkDiagonal=function(t){var e,n,r,a,s,u,c,l,f,d;return i(this,function(i){switch(i.label){case 0:e=t.startPoint,n=t.endPoint,r=e.x,a=n.x,s=a<r?-1:1,u=n.y<e.y?-1:1,c=Math.abs(r-a),l=0,i.label=1;case 1:return l<=c?(f=e.x+s*l,d=e.y+u*l,[4,new o.Point(f,d)]):[3,4];case 2:i.sent(),i.label=3;case 3:return l++,[3,1];case 4:return[2]}})},t.doWalkHorizontal=function(t){var e,n,r,a,s,u,c,l,f;return i(this,function(i){switch(i.label){case 0:e=t.startPoint,n=t.endPoint,r=e.y,a=e.x,s=n.x,u=Math.abs(s-a),c=a<s?1:-1,l=0,i.label=1;case 1:return l<=u?(f=a+l*c,[4,new o.Point(f,r)]):[3,4];case 2:i.sent(),i.label=3;case 3:return l++,[3,1];case 4:return[2]}})},t.doWalkVertical=function(t){var e,n,r,a,s,u,c,l,f;return i(this,function(i){switch(i.label){case 0:e=t.startPoint,n=t.endPoint,r=e.x,a=e.y,s=n.y,u=Math.abs(s-a),c=a<s?1:-1,l=0,i.label=1;case 1:return l<=u?(f=a+l*c,[4,new o.Point(r,f)]):[3,4];case 2:i.sent(),i.label=3;case 3:return l++,[3,1];case 4:return[2]}})},t}();e.LineWalker=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.is=function(t){return this.x===t.x&&this.y===t.y},Object.defineProperty(t.prototype,"name",{get:function(){return"("+this.x+","+this.y+")"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Point"+this.name},t}();e.Point=i},function(t,e,n){(function(e){t.exports=e.DotGame=n(23)}).call(this,n(0))},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n){var i=this.constructor,o=t.call(this,n)||this;return Object.setPrototypeOf(o,i.prototype),o.name=e.name,o}return o(e,t),e}(Error);e.InvalidLineTypeException=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t[t.Diagonal=2]="Diagonal",t[t.Invalid=3]="Invalid"}(e.LineType||(e.LineType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(26),r=n(5),a=function(){function t(){}return t.isBetween=function(t,e,n){if(e>n){var i=e;e=n,n=i}return e<=t&&t<=n},t.isPointOnLineSegment=function(e,n){var i=n.startPoint,o=n.endPoint;if(e.is(i)||e.is(o))return!0;if(!((i.x-e.x)/(i.y-e.y)===(e.x-o.x)/(e.y-o.y)))return!1;var r=t.isBetween(e.x,i.x,o.x),a=t.isBetween(e.y,i.y,o.y);return r&&a},t.areLinesParallel=function(e,n){try{return t.findIntersectionOfLines(e,n),!1}catch(t){if(t instanceof o.ParallelLinesException)return!0;throw t}},t.doLineSegmentsTouch=function(e,n){try{if(t.isPointOnLineSegment(e.startPoint,n)||t.isPointOnLineSegment(e.endPoint,n)||t.isPointOnLineSegment(n.startPoint,e)||t.isPointOnLineSegment(n.endPoint,e))return!0;var i=t.findIntersectionOfLines(e,n),r=t.isPointOnLineSegment(i,e),a=t.isPointOnLineSegment(i,n);return r&&a}catch(t){if(t instanceof o.ParallelLinesException)return!1;throw t}},t.findIntersectionOfLines=function(t,e){var n=t.startPoint,r=t.endPoint,a=e.startPoint,s=e.endPoint,u=r.y-n.y,c=n.x-r.x,l=u*n.x+c*n.y,f=s.y-a.y,d=a.x-s.x,h=f*a.x+d*a.y,p=u*d-f*c;if(0===p)throw new o.ParallelLinesException("Lines do not intersect!");return new i.Point((d*l-c*h)/p,(u*h-f*l)/p)},t.lineType=function(t){var e=t.startPoint,n=t.endPoint;if(e.x===n.x&&e.y===n.y)return r.LineType.Invalid;var i=Math.abs(e.x-n.x),o=Math.abs(e.y-n.y);return 0===i&&0!==o?r.LineType.Vertical:0===o&&0!==i?r.LineType.Horizontal:i===o?r.LineType.Diagonal:r.LineType.Invalid},t}();e.Geometry=a},function(t,e,n){(function(e){t.exports=e.DotGame=n(27)}).call(this,n(0))},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n){var i=this.constructor,o=t.call(this,n)||this;return Object.setPrototypeOf(o,i.prototype),o.name=e.name,o}return o(e,t),e}(Error);e.ParallelLinesException=r},function(t,e,n){(function(e){t.exports=e.DotGame=n(29)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.name=t};e.Player=i},function(t,e,n){(function(e){t.exports=e.DotGame=n(31)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t){this.dotGame=t}return t.prototype.selectPoint=function(t){var e=this.heading();return i.GameMessage.UpdateText(e,"Refresh to play again.")},t.prototype.timeout=function(){var t=this.heading();return i.GameMessage.UpdateText(t,"Refresh to play again. I'm waiting!")},t.prototype.heading=function(){return"This Game is Over - "+this.dotGame.currentPlayer().name+" Won!"},t}();e.GameOverState=o},function(t,e,n){(function(e){t.exports=e.DotGame=n(33)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(4),r=n(7),a=function(){function t(t){this.dotGame=t}return t.prototype.selectPoint=function(t){var e=new o.LineSegment(this.dotGame.startLinePoint,t),n=new r.NewLineValidator(this.dotGame.path),a=this.dotGame.currentPlayer().name;if(t.is(this.dotGame.startLinePoint)||!n.isValid(e))return this.dotGame.gameState=this.dotGame.lineStartState,i.GameMessage.InvalidEndNode(a);this.dotGame.path.addLine(e),this.dotGame.changePlayersTurn();var s=this.dotGame.currentPlayer().name;if(this.dotGame.isMoveAvailable())return this.dotGame.gameState=this.dotGame.lineStartState,i.GameMessage.ValidEndNode(s,"",e);this.dotGame.gameState=this.dotGame.gameOverState,this.dotGame.clearTimoutMessage();var u=s+" Wins!",c="Sorry "+a+", you lost! Refresh to play again.";return i.GameMessage.GameOver(u,c,e)},t.prototype.timeout=function(){return i.GameMessage.UpdateText(this.dotGame.currentPlayer().name,"Finish that line...if it's not too much trouble!")},t}();e.LineEndState=a},function(t,e,n){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),r=n(35),a=n(37),s=function(){function t(t){this.path=t,this.octilinearLineValidator=new r.OctilinearLineValidator,this.visitedNodeValidator=new a.VisitedNodeValidator(t)}return t.prototype.isValid=function(t){var e,n;if(!this.octilinearLineValidator.isValid(t))return!1;if(this.path.hasEndPoints()){if(!this.path.isEndPoint(t.startPoint))return!1;if(!this.visitedNodeValidator.isNewLineValid(t))return!1;var r=0;try{for(var a=i(this.path.lines),s=a.next();!s.done;s=a.next()){var u=s.value;if(o.Geometry.doLineSegmentsTouch(t,u)&&++r>1)return!1}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}return!0},t}();e.NewLineValidator=s},function(t,e,n){(function(e){t.exports=e.DotGame=n(36)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(5),r=function(){function t(){}return t.prototype.isValid=function(t){return i.Geometry.lineType(t)!==o.LineType.Invalid},t}();e.OctilinearLineValidator=r},function(t,e,n){(function(e){t.exports=e.DotGame=n(38)}).call(this,n(0))},function(t,e,n){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(t){this.path=t}return t.prototype.isNewLineValid=function(t){var e,n,r,a,s=t.points();try{for(var u=i(s),c=u.next();!c.done;c=u.next()){var l=c.value;if(!t.startPoint.is(l))try{for(var f=(r=void 0,i(this.path.visitedPoints)),d=f.next();!d.done;d=f.next()){var h=d.value;if(l.is(h))return o.DotGameLog.info(t.name+"touches visited "+h),!1}}catch(t){r={error:t}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return!0},t}();e.VisitedNodeValidator=r},function(t,e,n){(function(e){t.exports=e.DotGame=n(40)}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t){this.dotGame=t}return t.prototype.selectPoint=function(t){var e=this.dotGame.currentPlayer().name;if(!this.dotGame.isPointOnBoard(t)){var n=t.name+" is not a valid dot on the board!";return i.GameMessage.InvalidStartNode(e,n)}return this.dotGame.isPointOnBoard(t)&&(!this.dotGame.path.hasEndPoints()||this.dotGame.path.isEndPoint(t))?(this.dotGame.gameState=this.dotGame.nextLineEndState,this.dotGame.startLinePoint=t,i.GameMessage.ValidStartNode(e,"")):i.GameMessage.InvalidStartNode(e)},t.prototype.timeout=function(){return i.GameMessage.UpdateText(this.dotGame.currentPlayer().name,"Let's get the show on the road. Start a new line at any time.")},t}();e.LineStartState=o},function(t,e,n){(function(e){t.exports=e.DotGame=n(42)}).call(this,n(0))},function(t,e,n){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(4),a=n(2),s=n(43),u=function(){function t(){this._visitedPoints=[],this._lines=[]}return Object.defineProperty(t.prototype,"visitedPoints",{get:function(){return this._visitedPoints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){var t,e,n,o=[];try{for(var r=i(this._lines),a=r.next();!a.done;a=r.next())n=a.value,o.push(n.startPoint)}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n&&o.push(n.endPoint),o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0}),t.prototype.addLine=function(t){var e=this;if(o.DotGameLog.debug("Adding Line: ",t.name),o.DotGameLog.debug("Current Path:",this.path.toString()),this.hasEndPoints())if(t.startPoint.is(this.headPoint())){var n=t.asFlipped();o.DotGameLog.debug("Prepend Line(flipped): ",n.name),this._lines.unshift(n)}else o.DotGameLog.debug("Append Line: ",t.name),this._lines.push(t);else this._lines.push(t);t.points().forEach(function(t){return e._visitedPoints.push(t)}),o.DotGameLog.debug("New Path:",this.path.toString())},t.prototype.hasEndPoints=function(){return this._lines.length>0},t.prototype.isEndPoint=function(t){return this.headPoint().is(t)||this.tailPoint().is(t)},t.prototype.headPoint=function(){if(!this.hasEndPoints())throw new s.NoEndpointsException("Head point does not exists");return this._lines[0].startPoint},t.prototype.tailPoint=function(){if(!this.hasEndPoints())throw new s.NoEndpointsException("Tail point does not exists");return this._lines[this.lines.length-1].endPoint},t.prototype.build=function(t){this._lines=[];for(var e=0;e<t.length-1;e++){var n=new a.Point(t[e][0],t[e][1]),i=new a.Point(t[e+1][0],t[e+1][1]);this.addLine(new r.LineSegment(n,i))}},t}();e.PathTracker=u},function(t,e,n){(function(e){t.exports=e.DotGame=n(44)}).call(this,n(0))},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n){var i=this.constructor,o=t.call(this,n)||this;return Object.setPrototypeOf(o,i.prototype),o.name=e.name,o}return o(e,t),e}(Error);e.NoEndpointsException=r}]);
//# sourceMappingURL=dot-game.js.map